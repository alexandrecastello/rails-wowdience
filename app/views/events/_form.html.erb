<div class="event-form-container">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-gradient-primary text-white">
      <h4 class="mb-0">
        <i class="fas fa-calendar-plus me-2"></i>
        <%= event.persisted? ? t('events.edit_event') : t('events.new_event') %>
      </h4>
    </div>
    <div class="card-body p-4">
      <%= simple_form_for(event, html: { class: 'needs-validation', novalidate: true }) do |form| %>
        <% if event.errors.any? %>
          <div class="alert alert-danger">
            <h6 class="alert-heading">
              <i class="fas fa-exclamation-triangle me-2"></i>
              <%= pluralize(event.errors.count, "erro", "erros") %> impediu este evento de ser salvo:
            </h6>
            <ul class="mb-0">
              <% event.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="row">
          <div class="col-md-8">
            <div class="mb-4">
              <%= form.label :name, t('events_form.event_name'), class: "form-label fw-semibold" %>
              <%= form.input :name,
                  label: false,
                  placeholder: t('events_form.event_name_placeholder'),
                  wrapper_html: { class: '' },
                  input_html: { class: 'form-control form-control-lg' } %>
            </div>
          </div>
          <div class="col-md-4">
            <div class="mb-4">
              <%= form.label :start_date, t('events_form.event_date'), class: "form-label fw-semibold" %>
              <%= form.input :start_date,
                  as: :date,
                  label: false,
                  wrapper_html: { class: '' },
                  input_html: { class: 'form-control form-control-lg' } %>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="form-label fw-semibold">
            <i class="fas fa-map-marker-alt me-2 text-primary"></i>
            <%= t('events_form.event_location') %>
          </label>
          <div class="row">
            <div class="col-md-6">
              <%= form.association :location,
                  collection: Location.all.map { |location| [location.name, location.id] },
                  prompt: t('events_form.select_existing_location'),
                  label: false,
                  input_html: { class: 'form-select form-select-lg' } %>
            </div>
            <div class="col-md-6">
              <div class="form-floating">
                <%= text_field_tag :location_name, params[:location_name],
                    class: 'form-control form-control-lg',
                    placeholder: t('events_form.or_create_new_location') %>
                <label><%= t('events_form.or_create_new_location') %></label>
              </div>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <%= form.label :description, t('events_form.event_description'), class: "form-label fw-semibold" %>
          <%= form.input :description,
              as: :text,
              label: false,
              placeholder: t('events_form.event_description_placeholder'),
              wrapper_html: { class: '' },
              input_html: { class: 'form-control', rows: 4 } %>
        </div>

        <div class="form-actions d-flex justify-content-between align-items-center">
          <div>
            <%= link_to events_path, class: 'btn btn-outline-secondary btn-lg' do %>
              <i class="fas fa-arrow-left me-2"></i><%= t('navigation.cancel') %>
            <% end %>
          </div>
          <div>
            <%= form.button :submit,
                class: 'btn btn-primary btn-lg',
                data: { disable_with: t('events_form.saving') } do %>
              <i class="fas fa-save me-2"></i>
              <%= event.persisted? ? t('navigation.update') : t('navigation.create') %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
